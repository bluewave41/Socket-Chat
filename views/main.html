<h1>Socket Chat</h1>
<div id="content">
	<span>Here are the available servers:</span></br>
	<div id="servers"></div>
	<button id="createServer">Create Server</button>
	<button id="refresh">Refresh</button>
</div>

<script>
	var id;
	socket.off('serverList');
	socket.off('userID');
	$('#createServer').click(function() {
		loadView('createServer.html');
	});
	$('#refresh').click(function() {
		socket.emit('getServers', '');
	});
	socket.emit('getServers', '');
	socket.on('serverList', function(data) {
		let content = $('#servers').empty();
		if(!data.length) {
			content.append('No servers available at this time.');
		}
		for(var x=0;x<data.length;x++) {
			let button = $(`<button id=${data[x][2]}>Join</button>`);
			button.click(function() {
				socket.emit('joinServer', $(this).attr('id'));
			});
			content.append(data[x][0] + ' ' + data[x][1]).append(button).append('</br>');
		}
	});
	socket.on('userID', function(userID) {
		id = userID;
		loadView('server.html');
	});
</script>